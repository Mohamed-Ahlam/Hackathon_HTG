<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Teaching Tree</title>
  <link rel="stylesheet" href="../static/styles.css">
</head>
<body>
  <div class="dropdown-container">
    <div class="dropdown">
      <select id="dropdown1">
        <option disabled selected>Learning Disabilities</option>
        <option>Autism</option>
        <option>Visual Impairment</option>
        <option>Developmental Cognitive Disabilities</option>
        <option>Hearing Impairment</option>
        <option>Emotional & Behavioral Disorders</option>
        <option>Developmental Delay</option>
        <option>Physical Impairment</option>
        <option>Specific Learning Disabilities</option>
        <option>Other Health Impairment</option>
      </select>
    </div>

    <div class="dropdown">
      <select id="dropdown2">
        <option disabled selected>Classroom Support</option>
        <option>Classroom Additions</option>
        <option>Paraprofessional</option>
        <option>Language Interpreter</option>
        <option>EL Students(s)</option>
        <option>Co-Teachers</option>
      </select>
    </div>
  </div>

  <div class="chips-wrapper-container">
    <div class="chips-container-wrapper">
      <div class="chips-container" id="chips-container1"></div>
    </div>

    <div class="chips-container-wrapper">
      <div class="chips-container" id="chips-container2"></div>
    </div>
  </div>

  <button class="submit-button" onclick="goToNextPage()">Next</button>

  <script>
    const dropdown1 = document.getElementById("dropdown1");
    const dropdown2 = document.getElementById("dropdown2");
    const chipsContainer1 = document.getElementById("chips-container1");
    const chipsContainer2 = document.getElementById("chips-container2");

    function addChip(selectedValue, chipsContainer) {
      const existingChip = [...chipsContainer.children].some(
        (chip) => chip.textContent.includes(selectedValue)
      );

      if (!existingChip) {
        const chip = document.createElement("div");
        chip.classList.add("chip");

        chip.innerHTML = `
          ${selectedValue}
          <button onclick="removeChip(this)">×</button>
        `;

        chipsContainer.appendChild(chip);
      }
    }

    dropdown1.addEventListener("change", () => {
      const selectedValue = dropdown1.value;
      addChip(selectedValue, chipsContainer1);
      dropdown1.selectedIndex = 0;
    });

    dropdown2.addEventListener("change", () => {
      const selectedValue = dropdown2.value;
      addChip(selectedValue, chipsContainer2);
      dropdown2.selectedIndex = 0;
    });

    function removeChip(button) {
      const chip = button.parentElement;
      chip.parentElement.removeChild(chip);
    }

    function goToNextPage() {
      const chips1 = [...chipsContainer1.children].map(
        (chip) => chip.textContent.replace("×", "").trim()
      );

      const chips2 = [...chipsContainer2.children].map(
        (chip) => chip.textContent.replace("×", "").trim()
      );

      localStorage.setItem("learningDisabilities", JSON.stringify(chips1));
      localStorage.setItem("classroomSupport", JSON.stringify(chips2));

      window.location.href = "lessonOutOne.html";
    }
  </script>
</body>
</html>
