<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Teaching Tree</title>
  <link rel="stylesheet" href="../static/lessonOutStyles.css">
</head>
<body>
  <div class="container">
    <div class="textbox-container">
      <h2>Lesson Outline: Opening Sequence</h2>
      <textarea id="lessonPlan" class="textbox" placeholder="Add to your lesson plan here..."></textarea>
    </div>
    <div class="cards-container">
      <div class="card" onclick="addToLessonPlan('{{ sug1_var }}')">
        <h3>{{ dis1_var }}</h3>
        <p>{{ sin1_var }}</p>
        <p>{{ sug1_var }}</p>
      </div>
      <div class="card" onclick="addToLessonPlan('{{ sug2_var }}')">
        <h3>{{ dis2_var }}</h3>
        <p>{{ sin2_var }}</p>
        <p>{{ sug2_var }}</p>
      </div>
      <div class="card" onclick="addToLessonPlan('{{ sug3_var }}')">
        <h3>{{ dis3_var }}</h3>
        <p>{{ sin3_var }}</p>
        <p>{{ sug3_var }}</p>
      </div>
    </div>
  </div>
<div class="button-container">
      <button class="leaf-buttonBack" onclick="goBack()"></button>
      <button class="leaf-buttonNext" onclick="goToNextPage()"></button>
    </div>


    <script>
      function addToLessonPlan(text) {
        const textbox = document.getElementById('lessonPlan');
        textbox.value += (textbox.value ? '\n' : '') + text;
      }
    
      function goBack() {
        window.history.back();
      }
    
      function goToNextPage() {
        const lesson = document.getElementById('lessonPlan').value;
    
        // Create an object to store the data
        const formData = {
          lessonPlan: lesson
        };
    
        // Store form data in local storage
        localStorage.setItem('formData', JSON.stringify(formData));
    
        console.log('Going to the next page', formData);
    
        // Send data to the backend to generate the PDF
        fetch('/submit', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(formData)  // Send form data in the body
        })
        .then(response => response.json())
        .then(data => {
          console.log(data.message);  // Handle success response
          // Redirect to the next page after PDF is generated
          window.location.href = 'lessonOutThree.html';
        })
        .catch(error => {
          console.error('Error:', error);  // Handle errors if any
        });
      }
    </script>
</body>
</html>
